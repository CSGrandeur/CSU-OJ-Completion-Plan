先想到的思路是直接DP，`dp[cost][status][site]`，当前花费、状态（行走、在哪个公交上、在出租上且走了几公里，超过3公里按3公里算）、当前站点，优化的是走的时间。 这个思路的问题是，虽然dp的状态空间是 `101*204*100`，但是每次更新状态还有`100`数量级的边遍历，这样就行不通了。然而这个方法却水过去了。

更好的方法状态空间是`dp[cost][site]`，省去`status`这一维，需要预处理建图。根据三种交通方式，统一地建成一个点到点的距离+花费的无差别图。

首先是bus，因为公交不会抄近道，如果路线是`3->4->5`，它不会因为`3->6->5`更近就绕道，对bus线路上所有能一次性到达的两点都建一条边。

bus之后，就可以Floyd了，因为走路和出租车都是选最短路走的。Floyd之后对任意两点按直达建边。

这样建图在DP时候不需要考虑“当前状态”，比如出租车，都 只考虑起点发车 ，如果不是起点发车， 自然有其他的点建了直达边 。

如此得到了一个有重边的，每条边有距离、花费两个边权的链式图。接下来就可以DP了。最短路做DP也可以，不过多此一举，干净的DP就好。